---
## Front matter
title: "Отчёт по лабораторной работе №12"
subtitle: "Настройки сети в Linux"
author: "Щемелев Илья Владимирович"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки настройки сетевых параметров системы.

# Ход выполнения

## Проверка конфигурации сети

1. Для выполнения операций администрирования получены полномочия суперпользователя.  
   Переключение выполнено командой `su`, после чего приглашение командной строки изменилось на `root@…`, что подтверждает успешное получение прав администратора.

2. Выведена информация о сетевых интерфейсах и статистике передачи и приёма пакетов.  
   В системе присутствуют интерфейсы `lo` (loopback) и `enp0s3` (сетевой адаптер виртуальной машины).

   Рассмотрим интерфейс **enp0s3**:
   - тип интерфейса — Ethernet;
   - MAC-адрес — `08:00:27:f3:2f:6e`;
   - состояние — **UP**, что означает активное соединение;
   - MTU — 1500;
   - счётчики RX и TX отражают количество переданных и принятых пакетов и байт;
   - значения ошибок, потерь и коллизий равны нулю, что указывает на корректную работу интерфейса без сетевых проблем.

   ![Информация о сетевых интерфейсах](Screenshot_1.png)

3. Отображена таблица маршрутизации.  
   В системе присутствует маршрут по умолчанию через шлюз **10.0.2.2**, используемый для доступа к внешним сетям.  
   Также определён маршрут в локальную сеть **10.0.2.0/24**, доступную напрямую через интерфейс `enp0s3`.  
   Маршруты были получены автоматически от DHCP-сервера, что подтверждается соответствующей пометкой.

4. Выведена информация о назначенных IP-адресах.  
   Для интерфейса **enp0s3** назначен IPv4-адрес **10.0.2.15/24**, полученный динамически по DHCP.  
   Дополнительно отображаются IPv6-адреса, включая глобальный и link-local, что является стандартным поведением системы.

   Таким образом:
   - IPv4-адрес устройства — **10.0.2.15**;
   - сетевой адаптер — **enp0s3**.

   ![Назначенные IP-адреса](Screenshot_2.png)

5. Выполнена проверка сетевой связности с внешним узлом.  
   Отправка четырёх ICMP-пакетов на адрес **8.8.8.8** завершилась успешно, потерь пакетов не зафиксировано, время отклика находится в допустимых пределах.  
   Это подтверждает корректность настройки сети и наличие доступа в Интернет.

   ![Проверка доступности сети](Screenshot_3.png)

6. На интерфейс `enp0s3` добавлен дополнительный IPv4-адрес **10.0.0.10/24**.  
   Данный адрес был назначен вручную и добавлен к уже существующему динамическому адресу.

7. Повторный вывод информации об адресах подтвердил наличие двух IPv4-адресов на интерфейсе `enp0s3`:  
   основного адреса, полученного по DHCP, и дополнительного статического адреса **10.0.0.10/24**.

   ![Проверка добавленного адреса](Screenshot_4.png)

8. Выполнено сравнение вывода сетевой информации различными утилитами.  
   Утилита `ifconfig` отображает базовые параметры интерфейсов и статистику, однако предоставляет менее подробную и менее структурированную информацию по сравнению с современным инструментом `ip`.  
   В современных дистрибутивах Linux рекомендуется использовать `ip`, а `ifconfig` применяется преимущественно для совместимости.

   ![Вывод ifconfig](Screenshot_5.png)

9. Получен список всех UDP- и TCP-портов, прослушиваемых системой.  
   В выводе присутствуют системные и пользовательские службы, включая SSH, что указывает на активные сетевые сервисы и готовность системы к удалённому администрированию.

   ![Прослушиваемые порты](Screenshot_6.png)

## Управление сетевыми подключениями с помощью nmcli

1. Выведен список сетевых подключений, управляемых NetworkManager.  
   В системе присутствуют соединения для интерфейса `enp0s3`, а также loopback-интерфейс `lo`.

2. Добавлено новое Ethernet-соединение с именем **dhcp**, использующее автоматическое получение параметров сети для интерфейса `enp0s3`.  
   Операция завершилась успешно, что подтверждается сообщением системы.

3. Добавлено Ethernet-соединение с именем **static** со статическим IPv4-адресом **10.0.0.10/24** и шлюзом **10.0.0.1**.  
   Для данного профиля отключено автоматическое подключение, что позволяет вручную управлять его активацией.

4. Повторный просмотр списка соединений подтвердил наличие профилей **dhcp** и **static**.

   ![Проверка сетевых профилей](Screenshot_7.png)

5. Выполнено переключение на статическое соединение.  
   В результате активным стало соединение **static**, а на интерфейсе `enp0s3` был назначен IPv4-адрес **10.0.0.10/24**, что подтверждается выводом информации об адресах.

   ![Активация static-соединения](Screenshot_8.png)

6. Выполнен возврат к соединению **dhcp**.  
   После переключения интерфейс `enp0s3` снова получил динамический IPv4-адрес **10.0.2.15/24**, что подтверждает корректную работу NetworkManager и успешное управление сетевыми профилями.

   ![Возврат к DHCP-соединению](Screenshot_9.png)

## Изменение параметров соединения с помощью nmcli

1. В статическом сетевом соединении отключено автоматическое подключение при запуске системы.  
   Это позволяет вручную управлять моментом активации данного профиля и предотвращает его автоматическое использование вместо DHCP-соединения.

2. В параметры статического соединения добавлен DNS-сервер **10.0.0.10**.  
   Данный адрес используется системой для разрешения доменных имён.  
   Следует отметить, что при изменении параметров уже существующего соединения применяется префикс **ipv4**, а не **ip4**, используемый при создании нового профиля.

3. В конфигурацию статического соединения добавлен второй DNS-сервер **8.8.8.8**.  
   Для добавления дополнительного значения использован символ `+`, что позволило сохранить ранее заданный DNS-сервер и расширить список, а не заменить его.

4. Выполнено изменение основного IPv4-адреса статического соединения на **10.0.0.20/24**.  
   Данный адрес стал основным для интерфейса при активации профиля static.

5. К статическому соединению добавлен дополнительный IPv4-адрес **10.20.30.40/16**.  
   В результате интерфейс получил возможность работы одновременно в двух различных подсетях, что подтверждает поддержку нескольких адресов в одном профиле NetworkManager.

6. После внесения всех изменений статическое соединение было активировано.  
   Проверка показала, что:
   - активным соединением для интерфейса `enp0s3` является профиль **static**;
   - интерфейсу назначены IPv4-адреса **10.0.0.20/24** и **10.20.30.40/16**;
   - параметры DNS и шлюза применены корректно.

   ![Активация статического соединения и проверка адресов](Screenshot_10.png)

7. С помощью утилиты **nmtui** выполнен просмотр параметров сети в текстовом интерфейсе.  
   В окне настройки статического соединения отображаются:
   - режим IPv4 — **Manual**;
   - список назначенных IPv4-адресов;
   - адрес шлюза **10.0.0.1**;
   - DNS-серверы **10.0.0.10** и **8.8.8.8**.  
   Это подтверждает, что изменения, внесённые через `nmcli`, корректно отражаются в конфигурации NetworkManager.

   ![Настройки статического соединения в nmtui](Screenshot_11.png)
   
   ![Настройки DHCP соединения в nmtui](Screenshot_12.png)

8. Просмотрены параметры сетевых соединений в графическом интерфейсе операционной системы.  
   В настройках IPv4 для профиля **static** выбран ручной режим, указаны два IPv4-адреса с соответствующими масками, задан шлюз и список DNS-серверов.  
   Для профиля **dhcp** используется автоматический режим получения сетевых параметров.

   ![Настройки статического соединения в графическом интерфейсе](Screenshot_13.png)  
   ![Настройки DHCP-соединения в графическом интерфейсе](Screenshot_14.png)

9. Выполнено переключение обратно на исходное сетевое соединение с автоматическим получением параметров.  
   После активации DHCP-профиля интерфейс `enp0s3` снова получил динамический IPv4-адрес, что подтверждает корректную работу механизма переключения сетевых профилей.

# Контрольные вопросы

1. Команда, отображающая только состояние сетевых соединений без вывода IP-адресов, — **ip link**.  
   Она показывает список сетевых интерфейсов, их имена, аппаратные адреса (MAC), флаги и текущее состояние (UP/DOWN), но не содержит информации о назначенных IP-адресах.  
   Для просмотра именно адресов используется отдельная команда `ip addr`.

2. В операционных системах семейства RHEL управление сетью осуществляется службой **NetworkManager**.  
   Данная служба отвечает за настройку сетевых интерфейсов, управление соединениями (DHCP, статические адреса), переключение профилей и взаимодействие с утилитами `nmcli`, `nmtui` и графическим интерфейсом.

3. Имя узла (hostname) в ОС типа RHEL хранится в файле **/etc/hostname**.  
   В этом файле содержится только имя устройства без дополнительных параметров, и оно используется системой при загрузке.

4. Для задания или изменения имени узла используется команда **hostnamectl**.  
   С её помощью можно установить постоянное имя хоста, которое сохраняется после перезагрузки системы, а также просмотреть текущие параметры, связанные с именем устройства.

5. Для включения разрешения имён для конкретного IP-адреса используется конфигурационный файл **/etc/hosts**.  
   В этом файле вручную сопоставляются IP-адреса и доменные имена, что позволяет системе выполнять локальное разрешение имён без обращения к DNS-серверам.

6. Текущую конфигурацию маршрутизации показывает команда **ip route show**.  
   Она выводит маршруты по умолчанию, локальные маршруты, используемые интерфейсы, шлюзы и метрики, что позволяет определить, каким образом пакеты передаются между сетями.

7. Для проверки текущего состояния службы NetworkManager используется команда **systemctl status NetworkManager**.  
   Она позволяет определить, запущена ли служба, активна ли она в данный момент, а также просмотреть сообщения о возможных ошибках.

8. Для изменения текущего IP-адреса и шлюза по умолчанию сетевого соединения используется команда **nmcli connection modify**.  
   С её помощью можно задать статический IP-адрес, шлюз, DNS-серверы и другие параметры сетевого профиля, после чего применить изменения путём активации соответствующего соединения.

# Заключение

В ходе выполнения работы были изучены и отработаны основные приёмы диагностики и настройки сетевой конфигурации в операционной системе семейства RHEL. Были получены навыки анализа состояния сетевых интерфейсов, таблицы маршрутизации и назначенных IP-адресов, а также проверки доступности сети. На практике рассмотрено управление сетевыми подключениями с использованием утилит `ip`, `nmcli`, `nmtui` и графического интерфейса NetworkManager. В результате была выполнена настройка и переключение между DHCP- и статическими соединениями, что подтверждает корректную работу сетевой подсистемы и освоение базовых методов администрирования сети.
